## Базовые элементы

### Типы данных domain

**Значения**

|Значение     |Описание                     |Java класс             |
|-------------|-----------------------------|-----------------------|
|string       |Строка                       |java.lang.String       |
|integer      |Целое число                  |java.lang.Integer      |
|numeric      |Число с точкой без округлений|java.math.BigDecimal   |
|boolean      |true / false                 |java.lang.Boolean      |
|date         |Дата и время                 |java.util.Date         |
|object       |Объект                       |net.n2oapp.DataSet     |
|long         |Большое целое число          |java.lang.Long         |
|short        |Короткое целое число         |java.lang.Short        |
|byte         |Целое число размером с байт  |java.lang.Byte         |
|localdate    |Локальная дата               |java.time.LocalDate    |
|localdatetime|Локальная дата и время       |java.time.LocalDateTime|

:::note

Если к значению добавить квадратные скобки, например *integer[]*, то получится списковый тип.

:::

**Пример**

```xml
<input-text id="total" domain="numeric"/>
```

### Предустановленная фильтрация &lt;pre-filters&gt;

**Элементы**

|Наименование       |Тип     |Описание                                |Значение по умолчанию|
|-------------------|--------|----------------------------------------|---------------------|
|&lt;eq&gt;         |Нет тела|Фильтр эквивалентности                  |                     |
|&lt;in&gt;         |Нет тела|Фильтр вхождения хотя бы одного в список|                     |
|&lt;like&gt;       |Нет тела|Фильтр вхождения подстроки в строку     |                     |
|&lt;like-start&gt; |Нет тела|Фильтр начала подстроки                 |                     |
|&lt;is-null&gt;    |Нет тела|Фильтр пустого поля                     |                     |
|&lt;contains&gt;   |Нет тела|Фильтр вхождения списка в список        |                     |
|&lt;overlaps&gt;   |Нет тела|Фильтр пересечения списка со списком    |                     |
|&lt;more&gt;       |Нет тела|Фильтр больше                           |                     |
|&lt;less&gt;       |Нет тела|Фильтр меньше                           |                     |
|&lt;not-eq&gt;     |Нет тела|Фильтр не эквивалентности               |                     |
|&lt;not-in&gt;     |Нет тела|Фильтр не вхождения в список            |                     |
|&lt;is-not-null&gt;|Нет тела|Фильтр не пустого поля                  |                     |

**Атрибуты**

|Наименование   |Тип                                 |Описание                                                        |Значение по умолчанию|
|---------------|------------------------------------|----------------------------------------------------------------|---------------------|
|field-id       |Ссылка на [поле выборки](#__field_2)|Поле в выборке виджета, по которому будет фильтрация            |                     |
|value          |Строка                              |Значение фильтра (одно значение)                                |                     |
|values         |Строка                              |Значения фильтра (через запятую)                                |                     |
|ref-widget-id  |Строка                              |Идентификатор виджета, по полю которого будет фильтрация        |                     |
|ref-model      |Строка                              |resolve filter multi edit datasource                            |                     |
|param          |Строка                              |Параметр фильтра                                                |                     |
|reset-on-change|true, false                         |Сбросить при изменении модели. Доступно в списковых компонентах.|                     |
|routable       |true, false                         |Попадает ли фильтр в url                                        |false                |

#### Параметры запроса

Список параметров, передаваемых в url или body.

#### Path параметр &lt;path-param&gt;

**Атрибуты**

|Наименование |Тип   |Описание                                                 |Значение по умолчанию|
|-------------|------|---------------------------------------------------------|---------------------|
|name         |Строка|Название параметра, которое и попадет в url              |                     |
|value        |Строка|Значение параметра, может быть ссылкой на поле фильтрации|                     |
|ref-widget-id|Строка|Идентификатор виджета, по полю которого будет фильтрация |                     |
|ref-model    |Строка|Модель виджета, по полю которого будет фильтрация        |                     |

#### Query параметр &lt;query-param&gt;

**Атрибуты**

|Наименование |Тип   |Описание|Значение по умолчанию|
|-------------|------|-------------------------------------------------------------|---------------------|
|name         |Строка|Название параметра, которое и попадет в url в query параметры|                     |
|value        |Строка|Значение параметра, может быть ссылкой на поле фильтрации    |                     |
|ref-widget-id|Строка|Идентификатор виджета, по полю которого будет фильтрация     |                     |
|ref-model    |Строка|Модель виджета, по полю которого будет фильтрация            |                     |

### Переключатель &lt;switch&gt;

Переключатель.

**Атрибуты**

|Наименование  |Тип                    |Описание                                                          |Значение по умолчанию|
|--------------|-----------------------|------------------------------------------------------------------|---------------------|
|value-field-id|Ссылка на значение поля|Значение, в зависимости от которого будет переключаться содержимое|                     |

**Пример**

```xml
<switch value-field-id="gender.id">
  <case value="1">Мужской</case>
  <case value="2">Женский</case>
  <default>Неопределенный</default>
</switch>
```

#### &lt;case&gt;

Вариант переключения.

**Атрибуты**

|Наименование|Тип   |Описание                                         |Значение по умолчанию|
|------------|------|-------------------------------------------------|---------------------|
|value       |Строка|Значение, с которым сравнивается `value-field-id`|                     |

**Тело**

Содержимое, которое будет выбрано, в случае переключения.

#### &lt;default&gt;

Вариант по умолчанию.

**Тело**

Содержимое, которое будет выбрано, в случае переключения.

### Клик &lt;click&gt;

Клике по строке.

**Атрибуты**

|Наименование|Тип                                    |Описание                                                     |Значение по умолчанию|
|------------|---------------------------------------|-------------------------------------------------------------|---------------------|
|action-id   |Ссылка на [действие виджета](#__action)|Действие виджета, которое будет вызвано при нажатии на кнопку|                     |

**Пример**

```xml
<click action-id="view">
  <open-page .../>
</click>
```

### Параметр провайдера данных

Базовые свойства параметров провайдера данных

**Атрибуты**

|Наименование |Тип       |Описание                                     |Значение по умолчанию|
|-------------|----------|---------------------------------------------|---------------------|
|id           |Строка    |Идентификатор параметра                      |                     |
|default-value|Строка    |Значение по умолчанию                        |                     |
|domain       |Домены    |Тип данных                                   |                     |
|normalize    |Строка    |SpEL выражение, изменяющее значение параметра|                     |
|mapping      |Строка    |Выражение маппинга                           |                     |
|required     |true false|Обязательность параметра                     |false                |

#### Свойства входящих параметров провайдера данных.

В качестве входящих параметров могут быть, как простые поля &lt;field&gt;, так и составные: &lt;reference&gt;, &lt;list&gt;, &lt;set&gt;.

**Атрибуты**

|Наименование       |Тип   |Описание                                         |Значение по умолчанию|
|-------------------|------|-------------------------------------------------|---------------------|
|param              |Строка|Параметр содержащий url                          |                     |
|validation-fail-key|Строка|Код ошибки валидации с сервера                   |                     |
|entity-class       |Строка|Класс, которому соответствует параметр           |                     |
|enabled            |Строка|Условие, при котором должен быть выполнен маппинг|                     |

**Тело**

Если составное поле, то может содержать список любых видов полей

**Пример**
```xml
<in>
  <field id="gender*.id" domain="integer[]" mapping="genders" param="param"/>
  <list id="ratings" mapping="ratings">
    <field id="code" mapping="code"/>
    <field id="name" mapping="name"/>
  </list>
</in>
```

#### Свойства исходящих параметров провайдера данных.

В качестве исходящих параметров может быть только &lt;field&gt;

**Пример**

```xml
<out>
  <field id="gender*.id" domain="integer[]" mapping="genders"/>
</out>
```

Параметр, позволяющий обрабатывать информацию об ошибках

```xml
<fail-out>
  <field id="message" mapping="#this.getMessage()"/>
</fail-out>
```
